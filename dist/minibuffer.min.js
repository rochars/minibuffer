/*
 https://github.com/rochars/minibuffer
Copyright (c) 2018 Rafael da Silva Rocha.
*/
var z="function"==typeof Object.defineProperties?Object.defineProperty:function(e,d,h){e!=Array.prototype&&e!=Object.prototype&&(e[d]=h.value)},A="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function B(e){if(e){for(var d=A,h=["String","prototype","codePointAt"],g=0;g<h.length-1;g++){var p=h[g];p in d||(d[p]={});d=d[p]}h=h[h.length-1];g=d[h];e=e(g);e!=g&&null!=e&&z(d,h,{configurable:!0,writable:!0,value:e})}}
B(function(e){return e?e:function(d){if(null==this)throw new TypeError("The 'this' value for String.prototype.codePointAt must not be null or undefined");var e=this.length;d=Number(d)||0;if(0<=d&&d<e){d|=0;var g=this.charCodeAt(d);if(55296>g||56319<g||d+1===e)return g;d=this.charCodeAt(d+1);return 56320>d||57343<d?g:1024*(g-55296)+d+9216}}});
var J=function(){function e(){this.head=0}function d(a,b){this.a=a;this.c=0;this.f=this.a;this.g=255;a=Math.pow(2,this.a);b?(this.b=a/2-1,this.h=-a/2):(this.b=a-1,this.h=0);this.j()}function h(a,b,c,f){c=void 0===c?0:c;f=void 0===f?a.length:f;if(f%b)throw Error("Bad buffer length.");for(;c<f;c+=b){var r=a,d=b,e=c;d--;for(var k=0;k<d;k++){var g=r[e+k];r[e+k]=r[e+d];r[e+d]=g;d--}}}function g(a){if(!a)throw Error("Undefined type.");if(a.float){if(-1==[16,32,64].indexOf(a.bits))throw Error("Bad float type.");
}else if(1>a.bits||53<a.bits)throw Error("Bad type definition.");a.offset=8>a.bits?1:Math.ceil(a.bits/8);u=a.float?16==a.bits?C:32==a.bits?D:E:p;v=a.float?16==a.bits?F:32==a.bits?G:H:I;l=new d(64==a.bits?32:a.bits,a.float?!1:a.signed)}function p(a,b){return l.read(a,b)}function C(a,b){a=l.read(a,b);b=(a&31744)>>10;var c=a&1023;return(b?Math.pow(2,b-15)*(1+c/1024):c/1024*.00006103515625)*(a>>15?-1:1)}function D(a,b){m[0]=l.read(a,b);return t[0]}function E(a,b){m[w]=l.read(a,b);m[x]=l.read(a,b+4);return y[0]}
function I(a,b,c){return l.write(a,b,c)}function F(a,b,c){t[0]=b;var f=m[0];b=f>>16&32768;var d=f>>12&2047;f=f>>23&255;103<=f&&(b=(b|f-112<<10|d>>1)+(d&1));a[c++]=b&255;a[c++]=b>>>8&255;return c}function G(a,b,c){t[0]=b;return l.write(a,m[0],c)}function H(a,b,c){y[0]=b;c=l.write(a,m[w],c);return l.write(a,m[x],c)}d.prototype.read=function(a,b){b=void 0===b?0:b;for(var c=0,f=0;f<this.c;f++)c+=a[b+f]*Math.pow(256,f);return this.i(this.o(c))};d.prototype.write=function(a,b,c){c=void 0===c?0:c;c=this.s(a,
this.i(b),c);for(var f=2;f<this.c;f++,c++)a[c]=Math.floor(b/Math.pow(2,8*(f-1)))&255;8<this.a&&(a[c]=Math.floor(b/Math.pow(2,8*(this.c-1)))&this.g,c++);return c};d.prototype.j=function(){this.m();this.l();this.c=8>this.a?1:Math.ceil(this.f/8)};d.prototype.o=function(a){a>this.b&&(a-=2*this.b+2);return a};d.prototype.i=function(a){if(a>this.b)throw Error("Overflow.");if(a<this.h)throw Error("Underflow.");return a};d.prototype.m=function(){this.f=(this.a-1|7)+1};d.prototype.l=function(){var a=8-(this.f-
this.a);this.g=Math.pow(2,0<a?a:8)-1};d.prototype.s=function(a,b,c){a[c]=8>this.a?0>b?b+Math.pow(2,this.a):b:b&255;return c+1};var n=0===(new Uint8Array((new Uint32Array([1])).buffer))[0],w=n?1:0,x=n?0:1;n=new Int8Array(8);var m=new Uint32Array(n.buffer),t=new Float32Array(n.buffer),y=new Float64Array(n.buffer),u,v,l={};e.prototype.read=function(a,b,c){c=void 0===c?null:c;c=null===c?this.head:c;var f=b.bits/8;if(c+f>a.length)throw Error("Range error");var d=c;d=void 0===d?0:d;g(b);if(b.offset+d>a.length)throw Error("Bad buffer length.");
b.be&&h(a,b.offset,d,d+b.offset);var e=u(a,d);b.be&&h(a,b.offset,d,d+b.offset);this.head=f+c;return e};e.prototype.write=function(a,b,c,f){f=void 0===f?null:f;f=null===f?this.head:f;if(f+b.bits/8>a.length)throw Error("Range error");var d=f;d=void 0===d?0:d;g(b);f=d;d+=b.offset;if(void 0===c)throw Error("Undefined value.");if(null!==c&&-1==[Number,Boolean].indexOf(c.constructor))throw Error("Expected number, boolean or null; found "+c.constructor);for(;f<d;)f=v(a,c,f);b.be&&h(a,b.offset,f-b.offset,
f);this.head=f};e.prototype.readStr=function(a,b,c){c=void 0===c?null:c;c=null===c?this.head:c;b=c+b;if(b>a.length)throw Error("Range error");for(var d="";c<b;c++){var e=c,g=1;e=void 0===e?0:e;g=void 0===g?null:g;g=null!==g?e+g:a.length;for(var h="";e<g;){var k=a[e++];if(0===k>>7)h+=String.fromCharCode(k);else{var q=0;6===k>>5?q=1:14===k>>4?q=2:30===k>>3&&(q=3);k&=(1<<8-q-1)-1;for(var l=0;l<q;l++)k=k<<6|a[e++]&63;65535>=k?h+=String.fromCharCode(k):(k-=65536,h+=String.fromCharCode((k>>10&1023)+55296,
(k&1023)+56320))}}d+=h}this.head=c;return d};e.prototype.writeStr=function(a,b,c,d){c=void 0===c?b.length:c;d=void 0===d?null:d;d=null===d?this.head:d;var f=d+c;if(f>a.length)throw Error("Range error");var e=d;e=void 0===e?0:e;for(var g=[],k=0;k<b.length;k++){var h=b.codePointAt(k);if(128>h)g.push(h);else{var l=0,m=0;2047>=h?(l=1,m=192):65535>=h?(l=2,m=224):1114111>=h&&(l=3,m=240,k++);for(g.push((h>>6*l)+m);0<l;)g.push(128|h>>6*(l-1)&63),l--}}for(b=0;b<g.length;b++)a[e++]=g[b];this.head=e;if(this.head<
d+c)for(;this.head<f;this.head++)a[this.head]=0};return e}();window.MiniBuffer=J;
