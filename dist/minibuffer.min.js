/*
 https://github.com/rochars/minibuffer
Copyright (c) 2018 Rafael da Silva Rocha.
*/
var G=function(){function m(){this.head=0}function f(a,b){this.bits=a;this.signed=b;this.offset=0;this.min=-Infinity;this.max=Infinity;this.b=this.bits;this.c=255;this.g()}function q(a,b,c,d){c=void 0===c?0:c;d=void 0===d?a.length:d;if(d%b)throw Error("Bad buffer length.");for(;c<d;c+=b){var e=a,g=b,f=c;g--;for(var h=0;h<g;h++){var k=e[f+h];e[f+h]=e[f+g];e[f+g]=k;g--}}}function t(a){if(127<a)throw Error("Bad ASCII code.");}function u(a){if(!a)throw Error("Undefined type.");if(a.float){if(-1==[16,
32,64].indexOf(a.bits))throw Error("Bad float type.");}else if(1>a.bits||53<a.bits)throw Error("Bad type definition.");a.offset=8>a.bits?1:Math.ceil(a.bits/8);a.be=a.be||!1;a.float?16==a.bits?n=y:32==a.bits?n=z:64==a.bits&&(n=A):n=B;a.float?16==a.bits?p=C:32==a.bits?p=D:64==a.bits&&(p=E):p=F;h=new f(64==a.bits?32:a.bits,a.float?!1:a.signed)}function B(a,b){return h.read(a,b)}function y(a,b){a=h.read(a,b);b=(a&31744)>>10;var c=a&1023;return(b?Math.pow(2,b-15)*(1+c/1024):c/1024*.00006103515625)*(a>>
15?-1:1)}function z(a,b){k[0]=h.read(a,b);return r[0]}function A(a,b){k[v]=h.read(a,b);k[w]=h.read(a,b+4);return x[0]}function F(a,b,c){return h.write(a,b,c)}function C(a,b,c){r[0]=b;var d=k[0];b=d>>16&32768;var e=d>>12&2047;d=d>>23&255;103<=d&&(b=(b|d-112<<10|e>>1)+(e&1));a[c++]=b&255;a[c++]=b>>>8&255;return c}function D(a,b,c){r[0]=b;return h.write(a,k[0],c)}function E(a,b,c){x[0]=b;c=h.write(a,k[v],c);return h.write(a,k[w],c)}f.prototype.read=function(a,b){b=void 0===b?0:b;for(var c=0,d=this.offset-
1;0<d;)c|=a[d+b]<<8*d,d--;c=(a[b]|c)>>>0;return this.a(this.f(c))};f.prototype.write=function(a,b,c){c=void 0===c?0:c;b=this.a(b);a[c++]=b&255;for(var d=2;d<=this.offset;d++)a[c++]=Math.floor(b/Math.pow(2,8*(d-1)))&255;return c};f.prototype.m=function(a,b,c){c=void 0===c?0:c;b=this.a(b);c=this.o(a,b,c);for(var d=2;d<this.offset;d++)a[c++]=Math.floor(b/Math.pow(2,8*(d-1)))&255;8<this.bits&&(a[c++]=Math.floor(b/Math.pow(2,8*(this.offset-1)))&this.c);return c};f.prototype.h=function(a,b){b=void 0===
b?0:b;for(var c="",d=0;d<this.offset;){var e=a[b+d].toString(2);c=Array(9-e.length).join("0")+e+c;d++}return this.a(this.f(parseInt(c,2)))};f.prototype.g=function(){this.l();this.i();this.j();this.offset=8>this.bits?1:Math.ceil(this.b/8);if(this.b!=this.bits||8>this.bits||32<this.bits)this.write=this.m,this.read=this.h};f.prototype.f=function(a){a>this.max&&(a-=2*this.max+2);return a};f.prototype.a=function(a){if(a>this.max)throw Error("Overflow.");if(a<this.min)throw Error("Underflow.");return a};
f.prototype.j=function(){var a=Math.pow(2,this.bits);this.signed?(this.max=a/2-1,this.min=-a/2):(this.max=a-1,this.min=0)};f.prototype.l=function(){8<this.bits&&(this.b=(this.bits-1|7)+1)};f.prototype.i=function(){var a=8-(this.b-this.bits);this.c=Math.pow(2,0<a?a:8)-1};f.prototype.o=function(a,b,c){8>this.bits?a[c++]=0>b?b+Math.pow(2,this.bits):b:a[c++]=b&255;return c};var l=18===(new Uint8Array((new Uint32Array([305419896])).buffer))[0],v=l?1:0,w=l?0:1;l=new Int8Array(8);var k=new Uint32Array(l.buffer),
r=new Float32Array(l.buffer),x=new Float64Array(l.buffer),n,p,h={};m.prototype.read=function(a,b,c){c=void 0===c?null:c;c=null===c?this.head:c;var d=b.bits/8;if(c+d>a.length)throw Error("RangeError: Source is too large");var e=c;e=void 0===e?0:e;u(b);b.be&&q(a,b.offset,e,e+b.offset);var g=n(a,e);b.be&&q(a,b.offset,e,e+b.offset);this.head+=d+c;return g};m.prototype.write=function(a,b,c,d){d=void 0===d?null:d;d=null===d?this.head:d;if(d+b.bits/8>a.length)throw Error("RangeError: Source is too large");
var e=d;e=void 0===e?0:e;u(b);d=e;e+=b.offset;for(var g=b.be;d<e;){if(void 0===c)throw Error("Undefined value.");d=p(a,c,d)}g&&q(a,b.offset,d-b.offset,d);this.head=d};m.prototype.readStr=function(a,b,c){c=void 0===c?null:c;this.head=null===c?this.head:c;b=this.head+b;if(b>a.length)throw Error("RangeError: Source is too large");for(c="";this.head<b;this.head++){var d=a,e=this.head,g=1;e=void 0===e?0:e;g=void 0===g?null:g;var f="";for(g=g?e+g:d.length;e<g;)t(d[e]),f+=String.fromCharCode(d[e]),e++;c+=
f}return c};m.prototype.writeStr=function(a,b,c,d){c=void 0===c?b.length:c;d=void 0===d?null:d;d=null===d?this.head:d;var e=d+c;if(e>a.length)throw Error("RangeError: Source is too large");var g=d;g=void 0===g?0:g;for(var f=0;f<b.length;f++){var h=b.charCodeAt(f);t(h);a[g]=h;g++}this.head=g;if(this.head<d+c)for(;this.head<e;this.head++)a[this.head]=0};return m}();window.MiniBuffer=G;
