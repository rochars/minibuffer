/*
 https://github.com/rochars/minibuffer
Copyright (c) 2018 Rafael da Silva Rocha.
*/
var y="function"==typeof Object.defineProperties?Object.defineProperty:function(f,d,h){f!=Array.prototype&&f!=Object.prototype&&(f[d]=h.value)},z="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function A(f){if(f){for(var d=z,h=["String","prototype","codePointAt"],g=0;g<h.length-1;g++){var q=h[g];q in d||(d[q]={});d=d[q]}h=h[h.length-1];g=d[h];f=f(g);f!=g&&null!=f&&y(d,h,{configurable:!0,writable:!0,value:f})}}
A(function(f){return f?f:function(d){if(null==this)throw new TypeError("The 'this' value for String.prototype.codePointAt must not be null or undefined");var f=this.length;d=Number(d)||0;if(0<=d&&d<f){d|=0;var g=this.charCodeAt(d);if(55296>g||56319<g||d+1===f)return g;d=this.charCodeAt(d+1);return 56320>d||57343<d?g:1024*(g-55296)+d+9216}}});
var I=function(){function f(){this.head=0}function d(a,c){this.a=a;this.c=0;this.f=this.a;this.g=255;var b=Math.pow(2,this.a);c?(this.b=b/2-1,this.h=-b/2):(this.b=b-1,this.h=0);this.j()}function h(a,c,b,e){b=void 0===b?0:b;e=void 0===e?a.length:e;if(e%c)throw Error("Bad buffer length.");for(;b<e;b+=c){var m=a,d=c,f=b;d--;for(var k=0;k<d;k++){var g=m[f+k];m[f+k]=m[f+d];m[f+d]=g;d--}}}function g(a){if(!a)throw Error("Undefined type.");if(a["float"]){if(-1==[16,32,64].indexOf(a.bits))throw Error("Bad float type.");
}else if(1>a.bits||53<a.bits)throw Error("Bad type definition.");a.offset=8>a.bits?1:Math.ceil(a.bits/8);t=a["float"]?16==a.bits?B:32==a.bits?C:D:q;u=a["float"]?16==a.bits?E:32==a.bits?F:G:H;l=new d(64==a.bits?32:a.bits,a["float"]?!1:a.signed)}function q(a,c){return l.read(a,c)}function B(a,c){var b=l.read(a,c),e=(b&31744)>>10,m=b&1023;return(e?Math.pow(2,e-15)*(1+m/1024):m/1024*.00006103515625)*(b>>15?-1:1)}function C(a,c){n[0]=l.read(a,c);return r[0]}function D(a,c){n[v]=l.read(a,c);n[w]=l.read(a,
c+4);return x[0]}function H(a,c,b){return l.write(a,c,b)}function E(a,c,b){r[0]=c;var e=n[0];c=e>>16&32768;var m=e>>12&2047;e=e>>23&255;103<=e&&(c=(c|e-112<<10|m>>1)+(m&1));a[b++]=c&255;a[b++]=c>>>8&255;return b}function F(a,c,b){r[0]=c;return l.write(a,n[0],b)}function G(a,c,b){x[0]=c;b=l.write(a,n[v],b);return l.write(a,n[w],b)}d.prototype.read=function(a,c){c=void 0===c?0:c;for(var b=0,e=0;e<this.c;e++)b+=a[c+e]*Math.pow(256,e);return this.i(this.o(b))};d.prototype.write=function(a,c,b){b=void 0===
b?0:b;b=this.s(a,this.i(c),b);for(var e=2;e<this.c;e++,b++)a[b]=Math.floor(c/Math.pow(2,8*(e-1)))&255;8<this.a&&(a[b]=Math.floor(c/Math.pow(2,8*(this.c-1)))&this.g,b++);return b};d.prototype.j=function(){this.m();this.l();this.c=8>this.a?1:Math.ceil(this.f/8)};d.prototype.o=function(a){a>this.b&&(a-=2*this.b+2);return a};d.prototype.i=function(a){if(a>this.b)throw Error("Overflow.");if(a<this.h)throw Error("Underflow.");return a};d.prototype.m=function(){this.f=(this.a-1|7)+1};d.prototype.l=function(){var a=
8-(this.f-this.a);this.g=Math.pow(2,0<a?a:8)-1};d.prototype.s=function(a,c,b){a[b]=8>this.a?0>c?c+Math.pow(2,this.a):c:c&255;return b+1};var p=0===(new Uint8Array((new Uint32Array([1])).buffer))[0],v=p?1:0,w=p?0:1;p=new Int8Array(8);var n=new Uint32Array(p.buffer),r=new Float32Array(p.buffer),x=new Float64Array(p.buffer),t,u,l={};f.prototype.clear=function(){this.head=0};f.prototype.read=function(a,c,b){b=void 0===b?null:b;b=null===b?this.head:b;var e=c.bits/8;if(b+e>a.length)throw Error("Range error");
var m=b;m=void 0===m?0:m;g(c);if(c.offset+m>a.length)throw Error("Bad buffer length.");c.be&&h(a,c.offset,m,m+c.offset);var d=t(a,m);c.be&&h(a,c.offset,m,m+c.offset);this.head=e+b;return d};f.prototype.write=function(a,c,b,e){e=void 0===e?null:e;e=null===e?this.head:e;if(e+c.bits/8>a.length)throw Error("Range error");var d=e;d=void 0===d?0:d;g(c);e=d;d+=c.offset;if(void 0===b)throw Error("Undefined value.");if(null!==b&&-1==[Number,Boolean].indexOf(b.constructor))throw Error("Expected number, boolean or null; found "+
b.constructor);for(;e<d;)e=u(a,b,e);c.be&&h(a,c.offset,e-c.offset,e);this.head=e};f.prototype.readStr=function(a,c,b){b=void 0===b?null:b;b=null===b?this.head:b;c=b+c;c=-1===c?a.length:c;if(c>a.length)throw Error("Range error");for(var e="";b<c&&0!==a[b];b++){var d=b,f=1;d=void 0===d?0:d;f=void 0===f?null:f;f=null!==f?d+f:a.length;for(var g="";d<f;){var k=a[d++];if(0===k>>7)g+=String.fromCharCode(k);else{var h=0;6===k>>5?h=1:14===k>>4?h=2:30===k>>3&&(h=3);k&=(1<<8-h-1)-1;for(var l=0;l<h;l++)k=k<<
6|a[d++]&63;65535>=k?g+=String.fromCharCode(k):(k-=65536,g+=String.fromCharCode((k>>10&1023)+55296,(k&1023)+56320))}}e+=g}this.head=b;return e};f.prototype.writeStr=function(a,c,b,e){b=void 0===b?c.length:b;e=void 0===e?null:e;e=null===e?this.head:e;var d=e+b;if(d>a.length)throw Error("Range error");var f=e;f=void 0===f?0:f;for(var g=[],k=0;k<c.length;k++){var h=c.codePointAt(k);if(128>h)g.push(h);else{var l=0,n=0;2047>=h?(l=1,n=192):65535>=h?(l=2,n=224):1114111>=h&&(l=3,n=240,k++);for(g.push((h>>
6*l)+n);0<l;)g.push(128|h>>6*(l-1)&63),l--}}for(c=0;c<g.length;c++)a[f++]=g[c];this.head=f;if(this.head<e+b)for(;this.head<d;this.head++)a[this.head]=0};return f}();window.MiniBuffer=I;
